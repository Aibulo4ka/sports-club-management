# üìä –û—Ç—á—ë—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –ê–° –£–°–ö

**–î–∞—Ç–∞:** 2025-11-17
**–í–µ—Ä—Å–∏—è:** 1.0
**–§—Ä–µ–π–º–≤–æ—Ä–∫:** pytest + pytest-django + pytest-cov

---

## üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:      239
‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö:       162 (67.8%)
‚ùå –ü–∞–¥–∞—é—â–∏—Ö:       77 (32.2%)
‚è±  –í—Ä–µ–º—è:          ~56 —Å–µ–∫—É–Ω–¥
üìà –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞:  25.52%
```

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### 1. **Unit-—Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π (56 —Ç–µ—Å—Ç–æ–≤)**

| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –§–∞–π–ª | –¢–µ—Å—Ç–æ–≤ | –£—Å–ø–µ—à–Ω–æ | % |
|------------|------|--------|---------|---|
| accounts | `test_models.py` | 15 | 13 | 87% |
| memberships | `test_models.py` | 12 | 11 | 92% |
| bookings | `test_models.py` | 14 | 11 | 79% |
| payments | `test_models.py` | 15 | 15 | 100% |
| **–ò–¢–û–ì–û** | - | **56** | **50** | **89%** |

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**
- –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –º–æ–¥–µ–ª–µ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π (constraints, validators)
- –°—Ç—Ä–æ–∫–æ–≤—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (`__str__`)
- –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (`@property`)
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –º–æ–¥–µ–ª–µ–π
- –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ (ForeignKey, OneToOne)

---

### 2. **Unit-—Ç–µ—Å—Ç—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ (65 —Ç–µ—Å—Ç–æ–≤)**

| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –§–∞–π–ª | –¢–µ—Å—Ç–æ–≤ | –£—Å–ø–µ—à–Ω–æ | % |
|------------|------|--------|---------|---|
| accounts | `test_serializers.py` | 12 | 9 | 75% |
| memberships | `test_serializers.py` | 15 | 13 | 87% |
| bookings | `test_serializers.py` | 13 | 11 | 85% |
| payments | `test_serializers.py` | 25 | 19 | 76% |
| **–ò–¢–û–ì–û** | - | **65** | **52** | **80%** |

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
- Read-only –∏ write-only –ø–æ–ª—è
- –ö–∞—Å—Ç–æ–º–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ `create()` –∏ `update()`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ (Strategy –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ü–µ–Ω)

---

### 3. **–¢–µ—Å—Ç—ã –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (54 —Ç–µ—Å—Ç–∞)** ‚≠ê

| –ü–∞—Ç—Ç–µ—Ä–Ω | –§–∞–π–ª | –¢–µ—Å—Ç–æ–≤ | –£—Å–ø–µ—à–Ω–æ | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|---------|------|--------|---------|----------|
| **Strategy** | `memberships/test_patterns.py` | 26 | 25 | 98.70% |
| **Factory** | `memberships/test_patterns.py` | 9 | 9 | 98.70% |
| **Observer** | `accounts/test_patterns.py` | 9 | 9 | 100% |
| **Singleton** | `payments/test_patterns.py` | 10 | 9 | 78.26% |
| **–ò–¢–û–ì–û** | - | **54** | **52** | **93%** |

#### 3.1 Strategy Pattern (–°—Ç—Ä–∞—Ç–µ–≥–∏—è)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `apps/memberships/pricing.py`

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
- `NoDiscountStrategy` - –±–µ–∑ —Å–∫–∏–¥–∫–∏
- `StudentDiscountStrategy` - —Å–∫–∏–¥–∫–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (15%)
- `LongTermDiscountStrategy` - —Å–∫–∏–¥–∫–∞ –∑–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (10-20%)
- `CombinedDiscountStrategy` - –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è (–≤—ã–±–∏—Ä–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º)

**–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –†–∞—Å—á—ë—Ç —Å–∫–∏–¥–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –°–º–µ–Ω—É —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–∏–¥–∫–∏
- –ó–∞—â–∏—Ç—É –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–Ω

#### 3.2 Factory Pattern (–§–∞–±—Ä–∏–∫–∞)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `apps/memberships/pricing.py` - —Ñ—É–Ω–∫—Ü–∏—è `get_best_discount_strategy()`

**–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (90 –¥–Ω–µ–π, 89 –¥–Ω–µ–π)
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å –¥–æ–ª–≥–∏–º–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞–º–∏

#### 3.3 Observer Pattern (–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `apps/accounts/signals.py`

**–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Client –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Profile —Å —Ä–æ–ª—å—é CLIENT
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Trainer –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Profile —Å —Ä–æ–ª—å—é TRAINER
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è—Ö
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø—Ä–æ—Ñ–∏–ª—è

#### 3.4 Singleton Pattern (–û–¥–∏–Ω–æ—á–∫–∞)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `apps/payments/yookassa_service.py` - —Ñ—É–Ω–∫—Ü–∏—è `get_yookassa_service()`

**–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –í–æ–∑–≤—Ä–∞—Ç –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏
- –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- –†–∞–±–æ—Ç–∞ –º–µ—Ç–æ–¥–æ–≤ —Å mock-–æ–±—ä–µ–∫—Ç–∞–º–∏

---

### 4. **Integration-—Ç–µ—Å—Ç—ã API views (64 —Ç–µ—Å—Ç–∞)**

| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –§–∞–π–ª | –¢–µ—Å—Ç–æ–≤ | –£—Å–ø–µ—à–Ω–æ | % |
|------------|------|--------|---------|---|
| accounts | `test_views.py` | 16 | 10 | 63% |
| memberships | `test_views.py` | 18 | 0 | 0% |
| bookings | `test_views.py` | 14 | 0 | 0% |
| payments | `test_views.py` | 16 | 0 | 0% |
| **–ò–¢–û–ì–û** | - | **64** | **10** | **16%** |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ –ø–∞–¥–∞–µ—Ç –∏–∑-–∑–∞ `NoReverseMatch` (–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ URL –º–∞—Ä—à—Ä—É—Ç—ã). –°–∞–º–∏ —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`POST /api/accounts/register/`)
- JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (`POST /api/accounts/token/`)
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- Permissions (–∞–¥–º–∏–Ω vs –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç –ÆKassa
- –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª —á–µ—Ä–µ–∑ API

---

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

### –û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: 25.52%

| –ú–æ–¥—É–ª—å | –ü–æ–∫—Ä—ã—Ç–∏–µ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|--------|----------|-------------|
| **–ú–æ–¥–µ–ª–∏** | 95-100% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã** | 82-97% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **Signals** | 100% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–ü–∞—Ç—Ç–µ—Ä–Ω—ã (pricing)** | 98.70% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **YooKassa Service** | 78.26% | ‚úÖ –•–æ—Ä–æ—à–æ |
| **Views** | 0% | ‚è≥ –ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞–ø—Ä—è–º—É—é |
| **Tasks (Celery)** | 0% | ‚è≥ –ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å |

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:

1. **–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - 93% —É—Å–ø–µ—Ö–∞
   - Strategy Pattern –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏
   - Factory –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
   - Observer –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
   - Singleton –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä

2. **–ú–æ–¥–µ–ª–∏** - 89% —É—Å–ø–µ—Ö–∞
   - –í—Å–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
   - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞

3. **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã** - 80% —É—Å–ø–µ—Ö–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏

4. **JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - 100% —É—Å–ø–µ—Ö–∞
   - –í—Ö–æ–¥/–≤—ã—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - Refresh token —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ù–µ–≤–µ—Ä–Ω—ã–µ credentials –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:

1. **URL –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è API** (54 —Ç–µ—Å—Ç–∞ –ø–∞–¥–∞—é—Ç)
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `urls.py` –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∏–º–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Ç–µ—Å—Ç–∞–º–∏

2. **–§–∏–∫—Å—Ç—É—Ä—ã** (8 —Ç–µ—Å—Ç–æ–≤ –ø–∞–¥–∞—é—Ç)
   - IntegrityError –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥—É–±–ª–µ–π
   - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ —Ç–µ—Å—Ç–∞—Ö

3. **Mock –¥–ª—è YooKassa** (5 —Ç–µ—Å—Ç–æ–≤ –ø–∞–¥–∞—é—Ç)
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `request` –≤ context
   - –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—É mock_request

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

### pytest.ini
```ini
[pytest]
DJANGO_SETTINGS_MODULE = config.settings.dev
python_files = tests.py test_*.py *_tests.py
addopts =
    --verbose
    --cov=apps
    --cov-report=html
    --cov-report=term-missing
    --reuse-db
testpaths = apps
markers =
    unit: Unit tests
    integration: Integration tests
    patterns: Design patterns tests
    slow: Slow running tests
    yookassa: Tests requiring YooKassa API
```

### conftest.py
**20+ —Ñ–∏–∫—Å—Ç—É—Ä:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: `test_user`, `test_client_user`, `test_student_user`, `test_trainer_user`, `test_admin_user`
- API –∫–ª–∏–µ–Ω—Ç—ã: `api_client`, `authenticated_client`, `admin_client`
- –ú–æ–¥–µ–ª–∏: `test_client`, `test_trainer`, `test_membership`, `test_booking`, `test_payment`
- –§–∞–±—Ä–∏–∫–∏: `create_user`, `create_client`, `create_membership_type`
- Mock: `mock_yookassa_response`

---

## üìã –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞

### –í—Å–µ —Ç–µ—Å—Ç—ã
```bash
pytest
```

### –¢–æ–ª—å–∫–æ unit-—Ç–µ—Å—Ç—ã
```bash
pytest -m unit
```

### –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
```bash
pytest -m patterns
```

### –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
```bash
pytest --cov=apps --cov-report=html
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
```bash
pytest apps/accounts/tests/test_models.py -v
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
```bash
pytest apps/accounts/tests/test_models.py::TestProfileModel::test_create_profile -v
```

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. NoReverseMatch (54 —Ç–µ—Å—Ç–∞)
**–ü—Ä–∏—á–∏–Ω–∞:** URL –º–∞—Ä—à—Ä—É—Ç—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∏–º–µ–Ω–∞–º–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ `urls.py`
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (—Ç–µ—Å—Ç—ã –≥–æ—Ç–æ–≤—ã, –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã)

### 2. IntegrityError –≤ —Ñ–∏–∫—Å—Ç—É—Ä–∞—Ö (8 —Ç–µ—Å—Ç–æ–≤)
**–ü—Ä–∏—á–∏–Ω–∞:** `get_or_create` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
**–°—Ç–∞—Ç—É—Å:** –ò–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –∫–æ–¥)

### 3. Mock YooKassa (5 —Ç–µ—Å—Ç–æ–≤)
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `request` –≤ context —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
**–°—Ç–∞—Ç—É—Å:** –ù—É–∂–Ω–∞ —Ñ–∏–∫—Å—Ç—É—Ä–∞ `mock_request`
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (–º–æ–∫-—Ç–µ—Å—Ç—ã, —Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç)

### 4. __str__ –º–µ—Ç–æ–¥—ã (7 —Ç–µ—Å—Ç–æ–≤)
**–ü—Ä–∏—á–∏–Ω–∞:** –†–∞–∑–ª–∏—á–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç—Ä–æ–∫
**–°—Ç–∞—Ç—É—Å:** –ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `RUN_TESTS.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç–æ–≤
- `TESTING_REPORT.md` - —ç—Ç–æ—Ç –æ—Ç—á—ë—Ç
- `conftest.py` - —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `pytest.ini` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
- `.coveragerc` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è coverage

---

## ‚úÖ –í—ã–≤–æ–¥—ã

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:
1. ‚úÖ **–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç—ã** (93% —É—Å–ø–µ—Ö–∞)
2. ‚úÖ **–ú–æ–¥–µ–ª–∏ —Ö–æ—Ä–æ—à–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã** (89% —É—Å–ø–µ—Ö–∞)
3. ‚úÖ **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞** (—Ä–∞—Å—á—ë—Ç —Å–∫–∏–¥–æ–∫, –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
4. ‚úÖ **–ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤** (239 —Ç–µ—Å—Ç–æ–≤)
5. ‚úÖ **–•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (15 —Ñ–∞–π–ª–æ–≤ —Ç–µ—Å—Ç–æ–≤)

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:
1. ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å URL –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è API —Ç–µ—Å—Ç–æ–≤
2. ‚ö†Ô∏è –£–ª—É—á—à–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é —Ñ–∏–∫—Å—Ç—É—Ä
3. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è Celery tasks
4. ‚ö†Ô∏è –ü–æ–≤—ã—Å–∏—Ç—å –æ–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ 40-50%

### –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞: **8/10** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

**–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Å–æ–ª–∏–¥–Ω—É—é –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫—É—Ä—Å–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã!**

---

**–ê–≤—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** pytest, pytest-django, pytest-cov, faker
**Python:** 3.11.14
**Django:** 4.2.7
