{% extends 'base.html' %}

{% block title %}Редактирование профиля - АС УСК{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Редактирование профиля</h5>
                    <a href="{% url 'accounts_web:profile' %}" class="btn btn-sm btn-outline-secondary">
                        <i class="bi bi-arrow-left"></i> Назад к профилю
                    </a>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="first_name" class="form-label">Имя</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="first_name"
                                    name="first_name"
                                    value="{{ user.first_name }}"
                                    placeholder="Введите ваше имя"
                                >
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="last_name" class="form-label">Фамилия</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="last_name"
                                    name="last_name"
                                    value="{{ user.last_name }}"
                                    placeholder="Введите вашу фамилию"
                                >
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                            <input
                                type="email"
                                class="form-control"
                                id="email"
                                name="email"
                                value="{{ user.email }}"
                                required
                                placeholder="your@email.com"
                            >
                            <small class="text-muted">Используется для входа и уведомлений</small>
                        </div>

                        <div class="mb-3">
                            <label for="phone" class="form-label">Телефон <span class="text-danger">*</span></label>
                            <input
                                type="tel"
                                class="form-control"
                                id="phone"
                                name="phone"
                                value="{{ profile.phone }}"
                                required
                                placeholder="+7 (999) 123-45-67"
                            >
                        </div>

                        <div class="mb-3">
                            <label for="date_of_birth" class="form-label">Дата рождения</label>
                            <input
                                type="date"
                                class="form-control"
                                id="date_of_birth"
                                name="date_of_birth"
                                value="{{ profile.date_of_birth|date:'Y-m-d' }}"
                            >
                        </div>

                        <div class="mb-3">
                            <label for="address" class="form-label">Адрес</label>
                            <textarea
                                class="form-control"
                                id="address"
                                name="address"
                                rows="2"
                                placeholder="Город, улица, дом"
                            >{{ profile.address }}</textarea>
                        </div>

                        <div class="alert alert-info" role="alert">
                            <i class="bi bi-info-circle"></i>
                            <strong>Информация:</strong> Имя пользователя <strong>{{ user.username }}</strong> изменить нельзя.
                            Для изменения пароля обратитесь к администратору.
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i> Сохранить изменения
                            </button>
                            <a href="{% url 'accounts_web:profile' %}" class="btn btn-outline-secondary">
                                Отмена
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

{% endblock %}
